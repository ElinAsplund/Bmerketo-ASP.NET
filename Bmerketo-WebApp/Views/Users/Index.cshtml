@model UsersIndexViewModel

<partial name="/Views/Partials/_UserHeader.cshtml" />

<section class="register-form">
    <div class="container">
        <div class="form-content">
            <div class="form-title">User List</div>
            <hr>
            <div class="mb-2">Here are the users in the database.</div>
            @if (Model.UserModels != null)
            {
                foreach (var user in Model.UserModels)
                {
                    <div class="bg-body-tertiary mb-2 ps-3 pe-1 py-1">
                        <form class="d-flex align-items-center justify-content-between" method="post" novalidate>
                            <div>
                                <label asp-for="@Model.UserId" class="fw-bold"></label> @user.Id
                                <input type="hidden" asp-for="@Model.UserId" value="@user.Id" />
                                <span class="fw-bold">Name:</span> @user.FirstName @user.LastName 
                                <span class="fw-bold">Email:</span> @user.Email 
                                <span class="fw-bold">Phone Number:</span> 
                                @{
                                    var phoneNumber = "";

                                    if (user.PhoneNumber == null || user.PhoneNumber == "")
                                        phoneNumber = "No phone number was entered";
                                    else
                                        phoneNumber = user.PhoneNumber;
                                }
                                @phoneNumber
                                @*<span class="fw-bold">City:</span> @user.City*@
                                @*<span class="fw-bold">Role:</span> @user.Role.ToUpper()*@
                            </div>
                            <div class="d-flex">
                                @if (user.ProfileImage != null)
                                {
                                    <div class="fw-bold me-2">
                                        Profile image:
                                        <div style="width: 50px; height: 50px; overflow: hidden;" class="d-flex justify-content-center align-items-center">
                                            <img src="@user.ProfileImage" style="object-fit:cover; width: 100%; height: 100%; " />
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class=" me-2">
                                        <span class="fw-bold">Profile image: </span> No image!
                                    </div>
                                }
                            </div>
                            <div class="d-flex align-items-center" method="post" novalidate>
                                <div class="d-grid my-2">
                                    <label asp-for="@Model.Role" class="fw-bold"></label>
                                    <select asp-for="@Model.Role">
                                        <option selected>@user.Role.ToUpper()</option>
                                        @if(Model.AllRoles != null)
                                        {
                                            @foreach (var role in Model.AllRoles)
                                            {
                                                if (user.Role.ToUpper() != @role.Name!.ToUpper())
                                                {
                                                    <option value="@role.Name!.ToUpper()">@role.Name!.ToUpper()</option>
                                                }
                                            }
                                        }
                                    </select>
                                </div>
                                <button class="btn-theme mt-0 ms-3" style="padding: 5px;" type="submit">SAVE</button>
                            </div>
                        </form>
                    </div>
                }
            }
        </div>
    </div>
</section>